class Query {
public:
	
	virtual BindMap* GetBindMap() {
		return &extras->bind_map;
	}
	
	class Compare { public:
		bool operator() (const Query* a, const Query* b) const {
			return a->extras->id < b->extras->id;
		}
	};
	
protected:
	class QueryExtras { friend class Query;
		explicit QueryExtras(sqlite3_uint64 _id) : bind_map(0), id(_id) {}
		BindMap bind_map;
		const sqlite3_uint64 id;
	};
	
	explicit Query(sqlite3_uint64 id) : extras(new QueryExtras(id)) {}
	~Query() {delete extras;}
	
	QueryExtras* const extras;
};
